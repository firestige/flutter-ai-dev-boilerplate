# ADR-XXX: {决策标题}

<!-- 
AI Context & Usage Guidelines:
我们推动文档先行的原因是希望利用工程化手段帮助 AI 记住更多的上下文，从而提升 AI 的一致性。
此文档是系统演进的"关键帧"，当需要理解决策背后的"Why"时，请优先参考。

何时创建 ADR:
1. 引入新的架构模式或设计范式 (如: MVVM vs Bloc)
2. 选择关键技术栈或第三方库 (如: Isar vs Hive)
3. 改变核心数据模型结构
4. 定义核心算法或业务规则
5. 建立重要的团队代码约定

文件名建议: docs/design/adr/00x-name.md
-->

## 元数据
- **状态**: [Proposed | Accepted | Deprecated | Superseded]
- **日期**: YYYY-MM-DD
- **作者**: {Name}
- **标签**: {Tag1}, {Tag2}

## 1. 背景 (Context)
> 描述促使做出此决策的情境、问题或需求。
> 这里的上下文能帮助 AI 在未来理解为何当初做出了这样的选择，而非其它看似更优的选择。

## 2. 决策 (Decision)
> {做出的具体选择}
- 决策点 1
- 决策点 2

## 3. 理由 (Rationale)
> 解释选择该方案的逻辑链条。
- **对比方案**:
    - *方案 A*: 因...被否决
    - *方案 B*: 因...被否决
- **选择依据**: {设计原则引用 (如 OCP/SRP) / 性能指标 / 开发效率 / 生态支持}

## 4. 影响 (Impact & Consequences)
> 客观描述决策带来的后果，包括正向和负向。
- **架构影响**: {对模块耦合、层次结构的影响}
- **代码影响**: {需要重构的模块、新增的样板代码}
- **风险与限制**: {已知的潜在风险或技术债}
- **后续行动**: {需要补充的 Todo 或文档}

---
<!-- 以下为书写示例，创建新文件时请删除 -->
## 参考示例 (Example Reference)

### ADR-002：组件自治设计

**背景**：
原有 GeometricConstraintService 硬编码所有组件的约束逻辑，难以扩展，违反了开闭原则。每次新增组件都需要修改核心服务代码。

**决策**：
- 采用 `ComponentDefinition` 接口。
- 每个组件类型自己声明 Slot 和约束规则。
- 服务层只负责注册、拓扑构建和调度验证。

**理由**：
- **对比**: 之前的集中式管理虽然简单，但随着组件增多，维护成本呈指数级上升。
- **依据**: 遵循 OCP（开闭原则）——对扩展开放，对修改关闭。

**影响**：
- **架构**: 实现了核心逻辑与具体组件实现的解耦。
- **代码**: 新增连接件类型无需修改核心服务，只需实现接口。
- **后续**: 需要重构现有的 5 种组件以适配新接口。
